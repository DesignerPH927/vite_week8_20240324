import{S as u}from"./sweetalert2.all-gQaNXFuB.js";import{_,m as p,o as r,c as a,a as t,F as m,g as b,b as l,t as s,w as f}from"./index-6BvTerDF.js";import{u as g}from"./statusStore-N0jbiZgM.js";var x={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"getmarried",BASE_URL:"/vite_week8_20240324/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:c,VITE_PATH:h}=x,y={data(){return{remoteOrders:{user:{}},paidId:""}},methods:{...p(g,["pushMessage"]),getOrder(){this.isLoading=!0,this.$http(`${c}/api/${h}/order/${this.paidId}`).then(i=>{this.isLoading=!1,this.remoteOrders=i.data.order}).catch(i=>{this.isLoading=!1,this.pushMessage({style:"danger",title:"取得訂單失敗",content:i.response.data.message})})},payFor(){this.isLoading=!0,this.$http.post(`${c}/api/${h}/pay/${this.paidId}`).then(()=>{this.isLoading=!1,this.getOrder(),u.fire({title:"付款成功",text:"我們已收到您的訂單，感謝您的支持!",imageUrl:"https://media.istockphoto.com/id/1471121446/photo/consumers-rate-their-satisfaction-5-stars-customer-experience-survey-concepts-for-services.jpg?s=2048x2048&w=is&k=20&c=Jxuv6Yj1i0ChZGHNR3i5H7kPByrudNUl_sxM_TCyFHI=",imageWidth:400,imageHeight:200,imageAlt:"Custom image",confirmButtonColor:"#cc99ff",confirmButtonText:`
              <i class="bi bi-hand-thumbs-up"></i>
              確認
              <i class="bi bi-emoji-smile"></i>
            `,confirmButtonAriaLabel:"Thumbs up, 確認!"}).then(()=>{setTimeout(()=>{this.$router.push("/productsPage")},3e3)})}).catch(i=>{this.isLoading=!1,this.pushMessage({style:"danger",title:"付款失敗",content:i.response.data.message})})}},mounted(){this.paidId=this.$route.params.paidId,this.getOrder()}},v={class:"row g-3"},w={class:"col-md-6"},O={class:"card bg-transparent border-lilac"},k={class:"card-body"},T={class:"table align-middle text-nowrap"},L=t("thead",{class:"table-dark text-center"},[t("tr",null,[t("th",{colspan:"3"},[t("p",{class:"mb-0 fw-bold fs-5"}," 訂購清單 ")])])],-1),B={class:"text-center",width:"150px;"},E={class:"text-center"},M={class:"text-end fw-bold",style:{width:"150px"}},S=t("i",{class:"bi bi-currency-dollar"},null,-1),V={class:"fw-bold fs-4 text-end mb-0"},A=t("i",{class:"bi bi-currency-dollar"},null,-1),C={class:"col-md-6"},F={class:"card bg-transparent border-lilac"},H={class:"card-body"},I={class:"table align-middle"},P=t("thead",{class:"table-dark text-center"},[t("tr",null,[t("th",{colspan:"2"},[t("p",{class:"mb-0 fw-bold fs-5"}," 訂購資訊 ")]),t("th")])],-1),R=t("th",null,"姓名",-1),U=t("th",null,"取貨地址",-1),D=t("th",null,"手機號碼",-1),N=t("th",null,"電子信箱",-1),$=t("th",null,"支付方式",-1),j=t("th",null,"付款狀態",-1),G={key:0,class:"fw-bold fs-5 text-success"},J={key:1,class:"fw-bold fs-5 text-danger"},W={class:"text-end mt-5"};function Y(i,d,Z,q,e,n){return r(),a("div",v,[t("div",w,[t("div",O,[t("div",k,[t("table",T,[L,t("tbody",null,[(r(!0),a(m,null,b(e.remoteOrders.products,o=>(r(),a("tr",{key:o.id},[t("th",B,s(o.product.category),1),t("td",E,s(o.product.num)+" / "+s(o.product.unit),1),t("td",M,[S,l(" "+s(o.total),1)])]))),128))])]),t("p",V,[l(" 總價 "),A,l(" "+s(e.remoteOrders.total),1)])])])]),t("div",C,[t("div",F,[t("div",H,[t("table",I,[P,t("tbody",null,[t("tr",null,[R,t("td",null,s(e.remoteOrders.user.name),1)]),t("tr",null,[U,t("td",null,s(e.remoteOrders.user.address),1)]),t("tr",null,[D,t("td",null,s(e.remoteOrders.user.tel),1)]),t("tr",null,[N,t("td",null,s(e.remoteOrders.user.email),1)]),t("tr",null,[$,t("td",null,s(e.remoteOrders.user.paid),1)]),t("tr",null,[j,t("td",null,[e.remoteOrders.is_paid?(r(),a("span",G,"已付款")):(r(),a("span",J,"未付款"))])])])]),t("div",W,[t("button",{class:"btn btn-lilac w-50",type:"button",onClick:d[0]||(d[0]=f((...o)=>n.payFor&&n.payFor(...o),["prevent"]))},"確認付款")])])])])])}const X=_(y,[["render",Y]]);export{X as default};

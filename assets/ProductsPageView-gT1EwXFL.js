import{_ as b,m as L,r as l,o as a,c as u,d as i,a as t,e as h,F as m,g as f,b as g,i as T,t as o,w as $}from"./index-6BvTerDF.js";import{T as C}from"./ToastMessage-QFYtcSDc.js";import{u as V}from"./statusStore-N0jbiZgM.js";import{P as k}from"./PaginationView-VIKG9F-S.js";var M={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"getmarried",BASE_URL:"/vite_week8_20240324/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:v,VITE_PATH:x}=M,E={data(){return{isLoading:!1,remoteProducts:[],pagination:[],categories:["攝影師","新娘秘書","主持人","婚宴場","禮車","音樂","道具"]}},components:{PaginationComponent:k,ToastMessages:C},methods:{...L(V,["pushMessage"]),getProducts(c=1){this.isLoading=!0;const{category:n=""}=this.$route.query;this.$http(`${v}/api/${x}/products?category=${n}&page=${c}`).then(e=>{this.isLoading=!1,this.remoteProducts=e.data.products,this.pagination=e.data.pagination,window.scrollTo(0,250)}).catch(e=>{this.isLoading=!1,this.pushMessage({style:"danger",title:"錯誤訊息",content:e.response.data.message})})},addCart(c,n=1){const e={product_id:c.id,qty:n};this.isLoading=!0,this.$http.post(`${v}/api/${x}/cart`,{data:e}).then(r=>{this.isLoading=!1,this.pushMessage({style:"success",title:"成功加入購物車",content:r.data.message})}).catch(r=>{this.isLoading=!1,this.pushMessage({style:"danger",title:"失敗加入購物車",content:r.response.data.message}),this.$router.push("/productsPage")})}},watch:{"$route.query":{handler(){this.getProducts()},deep:!0}},mounted(){this.getProducts()}},R={class:"product"},B=t("div",{class:"productHeader"},null,-1),S={class:"container"},A={class:"py-7"},D={class:"row justify-content-md-center gx-3 gy-6 g-md-6"},N={class:"col-md-3 px-4"},U={class:"list-group text-center"},j={class:"col-md-9"},H={class:"row row-cols-md-1 row-cols-lg-2 row-cols-xl-3 row-cols-1 g-3 g-md-4"},q={class:"card",style:{width:"25rem"}},F={class:"itemWrap"},O=["src"],W={class:"card-body d-flex flex-column"},z={class:"d-flex"},G={style:{"letter-spacing":"2px"}},J={class:"badge text-bg-danger ms-auto"},K={class:"text-muted text-center"},Q={class:"d-flex justify-content-between align-items-center mb-3"},X={class:"text-muted"},Y={class:"fs-5 text-danger mb-0"},Z={class:"d-flex gap-2 mt-auto"},I=["onClick"],tt=t("i",{class:"bi bi-cart-plus-fill"},null,-1);function st(c,n,e,r,d,_){const P=l("VLoading"),w=l("ToastMessages"),p=l("RouterLink"),y=l("PaginationComponent");return a(),u(m,null,[i(P,{active:d.isLoading},null,8,["active"]),i(w),t("div",R,[B,t("div",S,[t("div",A,[t("div",D,[t("div",N,[t("div",U,[i(p,{to:"/productsPage",class:"list-group-item list-group-item-action","aria-current":"true"},{default:h(()=>[g(" 全部 ")]),_:1}),(a(!0),u(m,null,f(d.categories,s=>(a(),T(p,{key:s,to:`/productsPage?category=${s}`,class:"list-group-item list-group-item-action"},{default:h(()=>[g(o(s),1)]),_:2},1032,["to"]))),128))])]),t("div",j,[t("div",H,[(a(!0),u(m,null,f(d.remoteProducts,s=>(a(),u("div",{key:s.id,class:"col d-flex justify-content-center"},[t("div",q,[t("div",F,[t("img",{src:s.imageUrl,class:"bg-cover w-100",height:"250px;"},null,8,O)]),t("div",W,[t("h5",z,[t("span",G,o(s.title),1),t("span",J,o(s.category),1)]),t("p",K,o(s.description),1),t("div",Q,[t("del",X,"$ "+o(s.origin_price),1),t("p",Y," NT$ "+o(s.price),1)]),t("div",Z,[i(p,{to:`/product/${s.id}`,class:"btn btn-outline-lilac w-100 fw-bold"},{default:h(()=>[g(" 立即預約 ")]),_:2},1032,["to"]),t("button",{class:"btn btn-outline-lilac w-100 fw-bold",onClick:$(et=>_.addCart(s),["prevent"])},[tt,g(" 加入購物車 ")],8,I)])])])]))),128))])])]),i(y,{class:"mt-6",pages:d.pagination,"get-products":_.getProducts,onChangePage:_.getProducts},null,8,["pages","get-products","onChangePage"])])])])],64)}const nt=b(E,[["render",st]]);export{nt as default};

import{_ as L,m as w,r,o as a,c as n,d as l,a as s,e as b,t as i,F as u,g,j as S,v as M,b as f,w as T}from"./index-IH5Zc-RJ.js";import{T as k}from"./ToastMessage-e6ahaWgt.js";import{u as V}from"./statusStore-34fkjK9S.js";var $={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"getmarried",BASE_URL:"/vite_week8_20240324/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:h,VITE_PATH:_}=$,E={data(){return{isLoading:!1,id:"",remoteSingleProduct:{},remoteProducts:[],qty:1}},components:{ToastMessages:k},methods:{...w(V,["pushMessage"]),getProducts(){this.isLoading=!0,this.$http(`${h}/api/${_}/products`).then(e=>{this.isLoading=!1,this.remoteProducts=e.data.products}).catch(e=>{this.isLoading=!1,this.pushMessage({style:"danger",title:"取得產品失敗",content:e.response.data.message})})},getProduct(){this.isLoading=!0,this.$http(`${h}/api/${_}/product/${this.id}`).then(e=>{this.isLoading=!1,this.remoteSingleProduct=e.data.product}).catch(e=>{this.isLoading=!1,this.pushMessage({style:"danger",title:"取得產品失敗",content:e.response.data.message})})},clickProduct(e){this.id=e.id,this.isLoading=!0,this.$http(`${h}/api/${_}/product/${this.id}`).then(c=>{this.isLoading=!1,this.remoteSingleProduct=c.data.product,window.scrollTo(0,250)}).catch(c=>{this.isLoading=!1,this.pushMessage({style:"danger",title:"取得產品失敗",content:c.response.data.message})})},addCart(e,c=1){const m={product_id:e.id,qty:c};this.isLoading=!0,this.$http.post(`${h}/api/${_}/cart`,{data:m}).then(d=>{this.isLoading=!1,this.pushMessage({style:"success",title:"成功加入購物車",content:d.data.message}),this.$router.push("/carts/confirm")}).catch(d=>{this.isLoading=!1,this.pushMessage({style:"danger",title:"失敗加入購物車",content:d.response.data.message}),this.$router.push("/productsPage")})}},mounted(){this.id=this.$route.params.id,this.getProduct(),this.getProducts()}},q={class:"singleProduct"},C=s("div",{class:"singleProductHeader"},null,-1),R={class:"container"},U={class:"py-5"},D={class:"row gx-md-6 g-3"},N={class:"col-lg-6"},A=["src"],B={class:"col-lg-5"},H={style:{"--bs-breadcrumb-divider":"'>'"},"aria-label":"breadcrumb"},j={class:"breadcrumb"},F={class:"breadcrumb-item"},O={class:"breadcrumb-item active","aria-current":"page"},W={class:"badge bg-danger fs-5 mb-3"},z={class:"card-title fs-4"},G={class:"mt-5"},J=s("p",{class:"fs-4 fw-bold"}," 曾經榮獲 ",-1),K={class:"award"},Q={class:"text-end fw-bold text-danger fs-3"},X={class:"mb-3"},Y={class:"d-flex gap-3"},Z=["value"],I=s("div",{class:"my-5"},[s("hr",{style:{border:"3px solid #9966cc",opacity:".7","border-radius":"50px"}})],-1),ss={class:"mb-1"},ts=s("h3",{class:"fw-bold fs-3 text-center mb-5"}," 相關商品 ",-1),es={class:"card h-100",style:{width:"20rem"}},os=s("i",{class:"bi bi-heart loveIcon"},null,-1),is={class:"itemWrap"},cs=["src"],as={class:"card-body d-flex flex-column"},ns={class:"d-flex mb-4"},ds={style:{"letter-spacing":"2px"}},rs={class:"badge text-bg-danger ms-auto"},ls={class:"text-muted text-center mb-3"},us={class:"d-flex justify-content-between align-items-center mb-3"},hs={class:"text-muted"},_s={class:"fs-5 text-danger mb-0"},gs=["onClick"],ms=s("i",{class:"bi bi-cart-plus-fill"},null,-1);function ps(e,c,m,d,o,p){const v=r("VLoading"),y=r("ToastMessages"),P=r("RouterLink"),x=r("Vue3Marquee");return a(),n(u,null,[l(v,{active:o.isLoading},null,8,["active"]),l(y),s("div",q,[C,s("div",R,[s("div",U,[s("div",D,[s("div",N,[s("img",{src:o.remoteSingleProduct.imageUrl,class:"img-fluid"},null,8,A)]),s("div",B,[s("nav",H,[s("ol",j,[s("li",F,[l(P,{to:"/productsPage"},{default:b(()=>[f("產品列表")]),_:1})]),s("li",O,i(o.remoteSingleProduct.category),1)])]),s("h4",W,i(o.remoteSingleProduct.category),1),s("p",z,i(o.remoteSingleProduct.title),1),s("div",G,[J,s("ul",K,[(a(!0),n(u,null,g(o.remoteSingleProduct.content,t=>(a(),n("li",{key:t,class:"d-inline-block"},i(t),1))),128))]),s("p",Q," NT$ "+i(o.remoteSingleProduct.price),1)]),s("div",X,[s("div",Y,[S(s("select",{id:"qty",class:"form-select","onUpdate:modelValue":c[0]||(c[0]=t=>o.qty=t)},[(a(),n(u,null,g(50,t=>s("option",{key:t,value:t},i(t),9,Z)),64))],512),[[M,o.qty]]),s("button",{class:"btn btn-lilac w-100",onClick:c[1]||(c[1]=t=>p.addCart(o.remoteSingleProduct,o.qty)),type:"button"},"加入購物車")])])])]),I,s("div",ss,[ts,l(x,{"pause-on-hover":!0,clone:!0,duration:25},{default:b(()=>[(a(!0),n(u,null,g(o.remoteProducts,t=>(a(),n("div",{class:"me-4 h-100",key:t.id},[s("div",es,[os,s("div",is,[s("img",{src:t.imageUrl,class:"bg-cover w-100",height:"200px"},null,8,cs)]),s("div",as,[s("h4",ns,[s("span",ds,i(t.title),1),s("span",rs,i(t.category),1)]),s("h5",ls,i(t.description),1),s("div",us,[s("del",hs,"$"+i(t.origin_price),1),s("p",_s," NT$ "+i(t.price),1)]),s("button",{class:"btn btn-outline-lilac w-100 fw-bold mt-auto",onClick:T(bs=>p.clickProduct(t),["prevent"])},[ms,f(" 立即預約 ")],8,gs)])])]))),128))]),_:1})])])])])],64)}const Ps=L(E,[["render",ps]]);export{Ps as default};
